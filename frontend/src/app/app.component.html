<div class="flex h-screen w-screen overflow-hidden bg-[#0f0f0f] text-gray-300 font-sans">
  
  <!-- PANEL GAUCHE : Explorateur (conditionnel) -->
  <app-file-explorer *ngIf="showExplorer"></app-file-explorer>

  <!-- PANEL CENTRE : Éditeur -->
  <div class="flex-1 flex flex-col bg-[#0f0f0f] min-w-0">
    
    <!-- Menu -->
    <div class="h-8 border-b border-gray-800 flex items-center px-4 text-xs">
      <div class="flex items-center gap-4">
        
        <!-- File Menu -->
        <div class="relative group">
          <span class="cursor-pointer hover:text-white">File</span>
          <div class="hidden group-hover:block absolute top-full left-0 mt-1 bg-[#252526] border border-gray-700 rounded shadow-lg z-50 min-w-40">
            <div class="py-1">
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm" 
     (click)="createNewFile()">New File</div>
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm">Import File</div>
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm">Import Folder</div>
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm"
     (click)="createNewFolder()">New Folder</div>
            </div>
          </div>
        </div>
        
        <!-- Edit Menu -->
        <div class="relative group">
          <span class="cursor-pointer hover:text-white">Edit</span>
          <div class="hidden group-hover:block absolute top-full left-0 mt-1 bg-[#252526] border border-gray-700 rounded shadow-lg z-50 min-w-40">
            <div class="py-1">
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm" onclick="document.execCommand('undo')">Undo</div>
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm" onclick="document.execCommand('redo')">Redo</div>
            </div>
          </div>
        </div>
        
        <!-- View Menu -->
        <div class="relative group">
          <span class="cursor-pointer hover:text-white">View</span>
          <div class="hidden group-hover:block absolute top-full left-0 mt-1 bg-[#252526] border border-gray-700 rounded shadow-lg z-50 min-w-40">
            <div class="py-1">
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm" 
                   (click)="toggleExplorer()">
                {{ showExplorer ? 'Hide' : 'Show' }} Explorer
              </div>
              <div class="px-3 py-1.5 hover:bg-gray-800 cursor-pointer text-sm"
                   (click)="toggleDocumentation()">
                {{ showDocumentation ? 'Hide' : 'Show' }} Documentation
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="ml-auto flex items-center gap-2">
        <button
          class="w-7 h-7 flex items-center justify-center rounded hover:bg-gray-800"
          (click)="analyze()" [disabled]="isAnalyzing" title="Vérifier la syntaxe">
          <i *ngIf="!isAnalyzing" class="codicon codicon-check text-sm"></i>
          <i *ngIf="isAnalyzing" class="codicon codicon-loading codicon-modifier-spin text-sm"></i>
        </button>
        <button
          class="w-7 h-7 flex items-center justify-center rounded hover:bg-gray-800 text-green-400 hover:text-green-300"
          (click)="run()" [disabled]="isRunning" title="Exécuter le code">
          <i *ngIf="!isRunning" class="codicon codicon-play text-sm"></i>
          <i *ngIf="isRunning" class="codicon codicon-loading codicon-modifier-spin text-sm"></i>
        </button>
      </div>
    </div>

    <!-- Onglets des fichiers -->
    <app-file-tabs></app-file-tabs>

    <!-- Zone d'édition -->
    <!-- Zone d'édition -->
<div class="flex-1 relative overflow-hidden">
  <app-editor 
    *ngIf="activeFile && activeFile.content !== undefined"
    [code]="activeFile.content || ''"
    (codeChange)="onCodeChange($event)">
  </app-editor>
  <div *ngIf="!activeFile" class="flex items-center justify-center h-full text-gray-600">
    Select a file to start editing
  </div>
</div>

    <!-- Console -->
    <div class="h-40 border-t border-gray-800 flex flex-col bg-[#0f0f0f]">
      <div class="h-8 border-b border-gray-800 flex items-center px-4 text-xs text-gray-500">
        <span class="cursor-pointer hover:text-white">Terminal</span>
      </div>
      <div class="flex-1 overflow-hidden">
        <app-console [logs]="consoleLogs"></app-console>
      </div>
    </div>

    <!-- Status bar -->
    <div class="h-6 border-t border-gray-800 bg-[#151515] flex items-center justify-between px-4 text-xs text-gray-500">
      <div class="flex items-center gap-4">
        <span>Ready</span>
        <span>{{ activeFile?.language || 'text' }}</span>
      </div>
      <div class="flex items-center gap-4">
        <span>UTF-8</span>
        <span>LF</span>
      </div>
    </div>
  </div>

  <!-- PANEL DROIT : Documentation (conditionnel) -->
  <app-syntax-reference *ngIf="showDocumentation"></app-syntax-reference>
</div>